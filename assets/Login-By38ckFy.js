import{j as s,L as w,r,u as E,a as L,s as x}from"./index-CLyKECFY.js";import{A as P,F as h}from"./FormInput-HmjgX30U.js";import"./utils-CqcmVfpm.js";import"./Grow-CkB3cfMx.js";import"./Alert-DJO9huK4.js";const S={"form-login":"_form-login_h4t3p_1","form-login__btn":"_form-login__btn_h4t3p_69"};function v(){return s.jsxs("p",{style:{textAlign:"center"},children:["Don't have an account? ",s.jsx(w,{to:"/register",children:"Sign up"}),s.jsx("br",{}),s.jsx(w,{to:"/main",style:{fontSize:"20px"},children:"Go to Store"})]})}function y(){return s.jsx("button",{type:"submit",className:S["form-login__btn"],children:"Sign in"})}function D(o,t){const l=/^[^\s@]+@[^\s@]+$/,a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,c=/[a-z]/,n=/[A-Z]/,i=/[0-9]/,u=/^\S.*\S$|^\S$|^$/,e={email:"",password:""};return o?l.test(o)?a.test(o)||(e.email='"." required in email, not last character.'):e.email="Email needs @ (not last character)":e.email="Fill in the email address.",t.length<8?e.password="Min 8 characters for password.":c.test(t)?n.test(t)?i.test(t)?u.test(t)||(e.password="Password cannot start or end with spaces."):e.password="At least one number required.":e.password="Include an uppercase letter.":e.password="Needs 1+ lowercase letter.",e}function R({changeLoginStatus:o}){const[t,l]=r.useState(""),[a,c]=r.useState(""),[n,i]=r.useState({email:"",password:""}),[u,e]=r.useState(!1),[j,b]=r.useState({success:!1,message:""}),m=E();r.useEffect(()=>{setTimeout(()=>{L.getUserLogin()===!0&&m("/")},300)},[m]);const _=async f=>{f.preventDefault();let g=!0;const p=D(t,a);if((p.email||p.password)&&(g=!1),g){const d=await x.loginCustomer({email:t,password:a});x.refreshApiRoot(),d&&d.success!==!0?(i({email:"",password:""}),e(!0),b(d)):(o(!0),m("/"))}else i(p)},A=()=>{e(!1)};return s.jsxs("form",{className:S["form-login"],onSubmit:_,children:[u&&s.jsx(P,{response:j,onCloseAlert:A}),s.jsx("h1",{children:"Sign in"}),s.jsx(h,{label:"Email",id:"email",value:t,onChange:l,error:n.email,autocomplete:"username",placeholder:"Email"}),s.jsx(h,{label:"Password",id:"password",type:"password",value:a,onChange:c,error:n.password,autocomplete:"current-password",isLoginPage:!0,placeholder:"Password"}),s.jsx(y,{}),s.jsx(v,{})]})}export{R as default};
