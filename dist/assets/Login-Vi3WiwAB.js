import{r as o,u as F,a as R,j as s,s as q}from"./index-CMh8MLvt.js";import{A as z}from"./AuthAlert-BkuMXJ7M.js";const a={"form-login":"_form-login_h4t3p_1","form-login__input":"_form-login__input_h4t3p_29","form-login__btn":"_form-login__btn_h4t3p_69","form-login__error":"_form-login__error_h4t3p_105","password-container":"_password-container_h4t3p_115","toggle-password":"_toggle-password_h4t3p_123"};function T({changeLoginStatus:w}){const[u,h]=o.useState(""),[g,x]=o.useState(""),[d,S]=o.useState(!1),[i,f]=o.useState({email:"",password:""}),[j,m]=o.useState(!1),[b,p]=o.useState(!1),[P,_]=o.useState(!1),[A,y]=o.useState({success:!1,message:""}),c=F();o.useEffect(()=>{setTimeout(()=>{R.getUserData()===!0&&c("/")},300)},[]);const E=(e,t)=>{const n=/^[^\s@]+@[^\s@]+$/,l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,L=/[a-z]/,D=/[A-Z]/,$=/[0-9]/,k=/^\S.*\S$|^\S$|^$/,r={email:"",password:""};return e?n.test(e)?l.test(e)||(r.email='"." required in email, not last character.'):r.email="Email needs @ (not last character)":r.email="Fill in the email address.",t.length<8?r.password="Min 8 characters for password.":L.test(t)?D.test(t)?$.test(t)?k.test(t)||(r.password="Password cannot start or end with spaces."):r.password="At least one number required.":r.password="Include an uppercase letter.":r.password="Needs 1+ lowercase letter.",r},N=async e=>{e.preventDefault();let t=!0;const n=E(u,g);if(n.email?(t=!1,m(!0)):m(!1),n.password?(t=!1,p(!0)):p(!1),f(n),t){const l=await q.loginCustomer({email:u,password:g});l&&l.success!==!0?(f({email:"",password:""}),m(!0),p(!0),_(!0),y(l)):(w(!0),c("/"))}},v=()=>{S(!d)},C=()=>{_(!1)};return s.jsxs("form",{className:a["form-login"],onSubmit:N,children:[P&&s.jsx(z,{response:A,onCloseAlert:C}),s.jsx("h1",{children:"Sign in"}),s.jsx("label",{htmlFor:"email",children:"Email"}),s.jsx("input",{type:"text",id:"email",autoComplete:"username",className:a["form-login__input"],placeholder:"your@email.com",onChange:e=>h(e.target.value),"data-error":j}),i.email&&s.jsx("span",{className:a["form-login__error"],children:i.email}),s.jsx("label",{htmlFor:"password",children:"Password"}),s.jsxs("div",{className:a["password-container"],children:[s.jsx("input",{type:d?"text":"password",id:"password",className:a["form-login__input"],placeholder:"********",autoComplete:"current-password",onChange:e=>x(e.target.value),"data-error":b}),s.jsx("span",{className:a["toggle-password"],onClick:v,children:d?"ðŸ”“":"ðŸ”’"})]}),i.password&&s.jsx("span",{className:a["form-login__error"],children:i.password}),s.jsx("button",{type:"submit",className:a["form-login__btn"],children:"Sign in"}),s.jsxs("p",{style:{textAlign:"center"},children:["Don't have an account?"," ",s.jsx("a",{onClick:()=>c("/register"),children:"Sign up"}),s.jsx("br",{}),s.jsx("a",{style:{fontSize:"20px"},onClick:()=>c("/main"),children:"Go to Store"})]})]})}export{T as default};
